<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, maximum-scale=1, user-scalable=no">
    
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="../js/vendor/bs4/css/bootstrap.min.css">
    <!-- vendor css -->
    <link rel="stylesheet" href="../js/vendor/jquery-editable-select-master/dist/jquery-editable-select.min.css">
    <link rel="stylesheet" href="../js/vendor/swiper/css/swiper.min.css">
    <!-- fontawesome css -->
    <link rel="stylesheet" href="../js/vendor/fontawesome/css/fontawesome.css">
    <link rel="stylesheet" href="../js/vendor/fontawesome/css/brands.css">
    <link rel="stylesheet" href="../js/vendor/fontawesome/css/solid.css">
    <!-- custom css -->
    <link rel="stylesheet" href="../dist/style/css.min.css">
    <link rel="stylesheet" href="../dist/style/global.min.css">
    <link rel="stylesheet" href="../dist/style/index.min.css">
    <link rel="stylesheet" href="../dist/style/shopping-index.min.css">
    <link rel="stylesheet" href="../dist/style/animate.min.css">
    <title>Mobii</title>
</head>

<body>
    <div class="wrap container">
        <div class="shopping-discount">     
            <header>                    
                <div class="header-secondary container linebt-row">
                    <div class="row">
                        <div class="col-12 text-center">
                            <div class="title-name">選擇優惠券或輸入折扣碼</div>
                        </div>
                    </div>
                </div>   
            </header>
            <div class="input-box">
                <input type="text" placeholder="輸入優惠碼">
                 <button type="button">新增</button>
            </div>
            <div class="or-box text-center">
                <span>或者</span>
            </div>
            <div class="text-center div-switch d-none">
                <p class="canuse-discount-txt font-bold">可使用的優惠券
                <input type="reset" value="重設" class="float-right btn"></p>
                <!-- 可使用的優惠券 -->                
                <form id="store1">
                    <div class="can-use-discount-list">
                        <p class="can-use-title"><span>昇恆昌</span> 可選擇<span>二</span>張</p>
                        <ul>
                            <li class="checkedli">
                                <div class="item rwdimgbox-80">
                                    <div style="background-image: url('https://picsum.photos/300/300/?random=1');" class="rwdimg-cover"></div>
                                </div>
                                <div class="item discount-text item-middle">
                                    <p>昇恆昌</p>
                                    <p>9折 折扣券</p>
                                    <p>2019/11/15 ~ 2019/12/31</p>
                                </div>
                                <label class="radio-box">
                                    <div class="item">
                                        <input type="radio" name="radio" id="discount001" class="store1">
                                        <span class="checkmark"></span>
                                    </div>
                                </label>
                            </li>
                            <li class="checkedli">
                                <div class="item rwdimgbox-80">
                                    <div style="background-image: url('https://picsum.photos/300/300/?random=1');" class="rwdimg-cover"></div>
                                </div>
                                <div class="item discount-text item-middle">
                                    <p>昇恆昌</p>
                                    <p>8折 折扣券</p>
                                    <p>2019/11/15 ~ 2019/12/31</p>
                                </div>
                                <label class="radio-box">
                                    <div class="item">
                                        <input type="radio" name="radio" id="discount002" class="store1">
                                        <span class="checkmark"></span>
                                    </div>
                                </label>
                            </li>
                        </ul>
                    </div>
                </form>            
                <form id="store2">
                    <div class="can-use-discount-list">
                        <p class="can-use-title"><span>新光三越</span> 可選擇<span>一</span>張</p>
                        <ul>
                            <li class="checkedli">
                                <div class="item rwdimgbox-80">
                                    <div style="background-image: url('https://picsum.photos/300/300/?random=2');" class="rwdimg-cover"></div>
                                </div>
                                <div class="item discount-text item-middle">
                                    <p>新光三越</p>
                                    <p>9折 折扣券</p>
                                    <p>2019/11/15 ~ 2019/12/31</p>
                                </div>
                                <label class="radio-box">
                                    <div class="item">
                                        <input type="radio" name="radio2" id="discount003" class="store2">
                                        <span class="checkmark"></span>
                                    </div>
                                </label>
                            </li>
                        </ul>
                    </div>
                </form>
                <!-- 本次結帳無法用的優惠券 -->
                <p class="canuse-discount-txt font-bold mt-0">本次結帳無法用的優惠券</p>
                <div class="can-use-discount-list">
                    <ul>
                        <li class="checkedli">
                            <div class="item rwdimgbox-80">
                                <div style="background-image: url('https://picsum.photos/300/300/?random=4');" class="rwdimg-cover"></div>
                            </div>
                            <div class="item item-middle">
                                <p>昇恆昌</p>
                                <p>滿萬送千 折價券</p>
                                <p class="can-use-date">使用期限 2019/11/15 ~ 2019/12/31</p>
                            </div>
                            <div class="item item-see-more">
                                <a href="store-info.html">
                                    去逛逛<i class="material-icons">&#xe315;</i>
                                </a>
                            </div>
                        </li>
                    </ul>
                </div>
                <!-- total price -->
                <div class="total-price-box">
                    <div class="total-header">
                        <div class="store1 discount001" style="display:none;">
                            <div class="item-group small">
                                <div class="item"><p class="txt-line-clamp1">昇恆昌 9折 折扣券</p></div>
                                <div class="item discount-price" value="88">88 元</div>
                            </div>
                        </div>
                        <div class="store1 discount002" style="display:none;">
                            <div class="item-group small">
                                <div class="item"><p class="txt-line-clamp1">昇恆昌 8折 折扣券</p></div>
                                <div class="item discount-price" value="288">288 元</div>
                            </div>
                        </div>
                        <div class="store2 discount003" style="display:none;">
                            <div class="item-group small">
                                <div class="item"><p class="txt-line-clamp1">新光三越 9折 折扣券</p></div>
                                <div class="item discount-price" value="188">188 元</div>
                            </div>
                        </div>
                    </div>
                    <div class="total-body">
                        <div class="item-group">
                            <div class="item">總共優惠金額</div>
                            <div class="item price-dissubtotal" value="0">0 元</div>
                        </div>
                    </div>
                    <div class="total-footer">
                        <div class="item-group">
                            <div class="item">
                                <button type="button" class="cancel-btn" onclick="history.back();">取消</button>
                            </div>
                            <div class="item">
                                <button type="button" class="submit-btn" onclick="location.href='shopping-order.html'">確定</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="no-order div-switch d-block">
                <img src="../img/shopping/nodiscount.png" alt="">
                <p class="">咦？目前還沒有優惠券喔...</p>
                <button type="button" class="btn gray-btn mt-2" onclick="div_switch()">顯示優惠券狀態</button>
            </div>
        </div>
    
    </div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="../js/vendor/owlcarousel/vendors/jquery.min.js"></script>
    <!-- Latest compiled and minified JavaScript -->    
    <script src="../js/vendor/bs4/js/popper.min.js"></script>
    <script src="../js/vendor/bs4/js/bootstrap.min.js"></script>
    
    <!-- owlcarousel JS -->
    <script src="../js/vendor/owlcarousel/owlcarousel/owl.carousel.js"></script>
    <script src="../js/vendor/owlcarousel/vendors/highlight.js"></script>
    <script src="../js/vendor/owlcarousel/js/app.js"></script>   
    <script src="../js/vendor/jquery-editable-select-master/dist/jquery-editable-select.js"></script>

    <!-- vendor js -->
    <script src="../js/vendor/swiper/js/swiper.min.js"></script>
    <script src="../js/vendor/imgLiquid.js"></script>
    
    <!-- custom js -->
    <script src="../js/animateCss.js"></script>
    <script>    
    var distotal=parseInt($('.price-dissubtotal').attr('value'));
    $('.checkedli').on('click', function() { 
        var ckid=$(this).children().find('input').attr('id'); 
        var ckstroe=$(this).children().find('input').attr('class'); 
        $('input#'+ckid).prop('checked', true);
        $('input[type=radio]').each(function() {
            var id=$(this).attr('id');
            ($(this).is(':checked')) ? $('.'+id).attr("style","display:block") : $('.'+id).attr("style","display:none");
        });
        distotal=0;
        $('.total-header>div').each(function() {
            if (($(this).attr("style"))=="display:block")
                distotal += parseInt($(this).find('.discount-price').attr('value'));
        });
        dissumtotal(distotal); 
    });
    //reset
    $('input[type=reset]').on('click', function() { 
        $('form').each(function() {
            $(this)[0].reset();
        });
        $('.total-header>div').attr("style","display:none");
        dissumtotal(0);
    });
    //total display
    function dissumtotal(e){
        $('.price-dissubtotal').text('$'+formatPrice(e)+'元');
    }

    //Currency formatting
    function formatPrice(n) {
    var t = parseInt(n), i, r;
    for (t = t.toString().replace(/^(\d*)$/, "$1."), t = (t + "00").replace(/(\d*\.\d\d)\d*/, "$1"), t = t.replace(".", ","), i = /(\d)(\d{3},)/; i.test(t); )
        t = t.replace(i, "$1,$2");
    return t = t.replace(/,(\d\d)$/, ".$1"), r = t.split("."), r[1] == "00" && (t = r[0]), t
    }
    </script>
    <script src="../js/index.js"></script>
</body>

</html>